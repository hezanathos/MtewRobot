*** Settings ***
Resource          ../Conf/conf_Mtew_Projets.txt
Library           Selenium2Library

*** Keywords ***
!access_project_panel
    wait until page contains element    id=administrationMenuItem
    click element    xpath=//li[@id="administrationMenuItem"]//a[@class="dropdown-toggle"]
    wait until page contains element    id=projectsSubMenuItem
    click element    id=projectsSubMenuItem

!access_add_project
    wait until page contains element    xpath=//span[text()="Ajouter un projet"]
    click element    xpath=//span[text()="Ajouter un projet"]

!submit_form_add
    click element    xpath=//input[@value="Sauvegarder"]

!input_name
    input text    id=name    ${testNom}
    input text    id=projectDescription    ${testDesc}

!input_services
    click element    xpath=//label[@for="servicesIds1"]
    click element    xpath=//label[@for="servicesIds3"]

!record_project_name
    click element    xpath=//span[@class="sound-icon"]
    click element    xpath=//span[text()="Enregistrer"]
    sleep    10
    click element    xpath=//span[@class="stop pull-left"]

!assert_insert
    wait until page contains element    xpath=//div[@class="col-md-6 pull-right"]
    Page should contain    ${testNom}    ${testDesc}

!click_suppr
    click element    xpath=//input[@name="delete.button"]
    wait until page contains element    xpath=//span[text()="Ok"]
    click element    xpath=//span[text()="Ok"]

!check_box
    wait until page contains element    xpath=//table[@id="projectTable"]//tr[contains(text(),${testNom})]//td[@class="checkboxCell"]//div//label
    click element    xpath=//table[@id="projectTable"]//tr[contains(text(),${testNom})]//td[@class="checkboxCell"]//div//label

!acces_QCM
    wait until page contains element    id=quizMenuItem
    click element    xpath=//li[@id="quizMenuItem"]//a[text()="QCM"]

!assert_presence
    [Arguments]    ${present}
    run keyword if    ${present}==1    page should contain    ${testNom}
    ...    ELSE    page should not contain    ${testNom}

!acces_message
    wait until page contains element    id=smsMenuItem
    click element    xpath=//li[@id="smsMenuItem"]//a[text()="Message"]

!acces_sondage
    wait until page contains element    id=surveyMenuItem
    click element    xpath=//li[@id="surveyMenuItem"]//a[text()="Sondage"]

!acces_question
    wait until page contains element    id=kisaitooMenuItem
    click element    xpath=//li[@id="kisaitooMenuItem"]//a//span[text()="Question/RÃ©ponse"]

!input_filtre_nom
    [Arguments]    ${bool}
    input text    id=description    ${empty}
    run keyword if    ${bool}==1    input text    id=name    ${testNom}
    ...    ELSE    input text    id=name    azer
    click element    xpath=//input[@value="Rechercher"]

!input_filtre_desc
    [Arguments]    ${bool}
    input text    id=name    ${empty}
    run keyword if    ${bool}==1    input text    id=description    ${testDesc}
    ...    ELSE    input text    id=description    azer
    click element    xpath=//input[@value="Rechercher"]
